<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>How we tackled technical debt at Wikipedia</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">How we tackled technical debt at Wikipedia</h1>
</header>
<section data-field="subtitle" class="p-summary">
Talking a bit helped us write off several years of technical debt
</section>
<section data-field="body" class="e-content">
<section name="115e" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h1 name="4085" id="4085" class="graf graf--h3 graf--leading graf--title">How we tackled technical debt at Wikipedia</h1><h2 name="9ffe" id="9ffe" class="graf graf--h4 graf-after--h3 graf--subtitle">Talking a bit helped us write off several years of technical debt</h4><p name="3044" id="3044" class="graf graf--p graf--hasDropCapModel graf--hasDropCap graf-after--h4"><span class="graf-dropCap">A</span> big challenge for any software engineer is explaining an important technical change to an audience who may not necessarily have the appropriate context. “Technical debt” is a phrase that will perplex a product owner if not articulated correctly. If you work in any product-centric team, you’ll likely find many technical tasks may be brushed aside in exchange for more tangible, visible outputs. That said, technical debt is very real and <a href="https://blog.wikimedia.org/2017/11/14/technical-debt/" data-href="https://blog.wikimedia.org/2017/11/14/technical-debt/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">needs to be addressed</a>.</p><figure name="a87f" id="a87f" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 467px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 66.7%;"></div><img class="graf-image" data-image-id="0*rZbuE9ZrLeJYAu4g.jpg" data-width="960" data-height="640" src="https://cdn-images-1.medium.com/max/800/0*rZbuE9ZrLeJYAu4g.jpg"></div><figcaption class="imageCaption">A product owner responds to an engineer who has told them they need a feature freeze while a year is spent fixing some poorly defined technical debt without a clear outline of what that means (Source: <a href="https://pixabay.com/photos/bored-upset-annoyed-annoy-woman-3082829/" data-href="https://pixabay.com/photos/bored-upset-annoyed-annoy-woman-3082829/" class="markup--anchor markup--figure-anchor" rel="noopener" target="_blank">Pixabay</a>, <a href="https://pixabay.com/service/license/" data-href="https://pixabay.com/service/license/" class="markup--anchor markup--figure-anchor" rel="noopener" target="_blank">free for commercial/non-commercial use</a>.)</figcaption></figure><p name="c614" id="c614" class="graf graf--p graf-after--figure">Back in January 2018, Wikimedia engineer Joaquin Hernandez and I <a href="http://Reading/Web/Projects/Invest_in_the_MobileFrontend_%26_MinervaNeue_frontend_architecture" data-href="http://Reading/Web/Projects/Invest_in_the_MobileFrontend_%26_MinervaNeue_frontend_architecture" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">pitched a one year project</a> to pursue the scoped and measurable goal of increasing code coverage of our codebase and investing in our ageing but strategically important codebase. We did so with the belief that this could lead to working with code we liked much more.</p><p name="78a1" id="78a1" class="graf graf--p graf-after--p">Often developers, designers and product owners speak different languages and have very different and conflicting desires. Taking the time out to write the project proposal and talk together about problems, solutions and benefits was well worth the time and resulted in a shared mutual understanding. I believe that because of this work and new shared understanding, the project was easier to <a href="https://www.mediawiki.org/wiki/Wikimedia_Audiences#Goals" data-href="https://www.mediawiki.org/wiki/Wikimedia_Audiences#Goals" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">get onto our annual goals</a>.</p><h1 name="1f5d" id="1f5d" class="graf graf--h3 graf-after--p">The problem statement</h1><p name="4c00" id="4c00" class="graf graf--p graf-after--h3">Our “stack” is a LAMP stack, with jQuery and some in-house (but open sourced) libraries you have <a href="https://www.npmjs.com/package/oojs" data-href="https://www.npmjs.com/package/oojs" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">likely</a> <a href="https://www.npmjs.com/package/oojs-ui" data-href="https://www.npmjs.com/package/oojs-ui" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">never heard of</a>. Given the age of our project, we still have several libraries that we can’t easily remove from our stack without breaking crucial and complicated tooling made by developers long gone that editors still use to keep Wikipedia running. For example, much of our site is built on <a href="https://jqueryui.com/" data-href="https://jqueryui.com/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">jQuery UI</a> which was released back in 2007. Our technical community has made good progress in pulling us away from these libraries by getting them off the critical path (JavaScript that is loaded without the user interacting with anything) and reducing redundancy.</p><figure name="93b7" id="93b7" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 465px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 66.4%;"></div><img class="graf-image" data-image-id="0*o0iduhiFLI6KR0bL.jpg" data-width="958" data-height="636" src="https://cdn-images-1.medium.com/max/800/0*o0iduhiFLI6KR0bL.jpg"></div><figcaption class="imageCaption">A newly hired front-end developer inspects the dependency tree for Wikipedia’s mobile search functionality (Source: <a href="http://www.flickr.com/photos/37916456@N02/8722944827" data-href="http://www.flickr.com/photos/37916456@N02/8722944827" class="markup--anchor markup--figure-anchor" rel="noopener" target="_blank">U.S. Department of Energy</a>, public domain)</figcaption></figure><p name="8a90" id="8a90" class="graf graf--p graf-after--figure">Possibly the biggest example of success with our modernization of the front-end is the mobile website, <a href="https://t.co/33ywLtJaIu" data-href="https://t.co/33ywLtJaIu" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">which runs on a separate domain</a>, and runs 60% fewer bytes of JavaScript than the desktop site, despite being more reliant on JavaScript for many of its workflows, notably editing and searching.</p><figure name="92c1" id="92c1" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 82px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 11.700000000000001%;"></div><img class="graf-image" data-image-id="1*CHZI1i0XXxOuRS9LrkOo3w.png" data-width="957" data-height="112" src="https://cdn-images-1.medium.com/max/800/1*CHZI1i0XXxOuRS9LrkOo3w.png"></div><figcaption class="imageCaption">We constantly monitor JavaScript bundle sizes for the Wikipedia article about Facebook via <a href="http://webpagetest.org" data-href="http://webpagetest.org" class="markup--anchor markup--figure-anchor" rel="noopener" target="_blank">webpagetest</a>. It shows the mobile site’s JavaScript is 60% of what’s needed to run the desktop site (where many of our editors are). You can check these graphs out and explore this data more on <a href="https://grafana.wikimedia.org/d/000000205/mobile-2g?orgId=1" data-href="https://grafana.wikimedia.org/d/000000205/mobile-2g?orgId=1" class="markup--anchor markup--figure-anchor" rel="noopener" target="_blank">our grafana instance</a>.</figcaption></figure><p name="35c6" id="35c6" class="graf graf--p graf-after--figure">Our past front-end decisions continue to haunt the developers that work on our codebase and are unlikely to disappear from our stack entirely any time soon. Any new library being introduced to our stack is quite rightly met with suspicion. Any attempts to <a href="https://phabricator.wikimedia.org/T157014" data-href="https://phabricator.wikimedia.org/T157014" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">adopt modern JavaScript libraries such as Vue.js and React </a>are quite rightly slower with the scrutiny you’d expect from a decade old web veteran with limited resources and time like Wikipedia that’s seen it all from its rocking chair on the porch¹. We’ve learned that bad technical decisions are hard to undo.</p><p name="da97" id="da97" class="graf graf--p graf-after--p">We’ve likely had every discussion every developer in every other organization has had, whether it’s been “Mustache VS Handlebars”, “Should we use TypeScript?” or “Which is better? Vue.js or React.js?”. What we’ve found is it’s really hard to get consensus on these big questions in an open source community with no benevolent dictator to make the decisions.</p><figure name="d1dd" id="d1dd" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 977px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 139.5%;"></div><img class="graf-image" data-image-id="0*VbSsYOpWz4ynWbyc.jpg" data-width="1440" data-height="2009" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/0*VbSsYOpWz4ynWbyc.jpg"></div><figcaption class="imageCaption">Wikipedia, a decade old web veteran reviews the latest proposal to adopt React.js in Wikimedia’s websites [Source: <a href="https://commons.wikimedia.org/wiki/File:Garden,_man,_hat,_smoking,_pipe,_wicker_chair,_reading,_newspaper_Fortepan_2755.jpg" data-href="https://commons.wikimedia.org/wiki/File:Garden,_man,_hat,_smoking,_pipe,_wicker_chair,_reading,_newspaper_Fortepan_2755.jpg" class="markup--anchor markup--figure-anchor" rel="noopener" target="_blank">Wikimedia Commons</a>, public domain]</figcaption></figure><p name="7f21" id="7f21" class="graf graf--p graf-after--figure">This aside, <a href="https://commons.wikimedia.org/wiki/File:Wikimedia_monthly_pageviews_%28desktop%2Bmobile%29,_2013-.png#/media/File:Wikimedia_monthly_pageviews_%28desktop%2Bmobile%29,_2013-.png" data-href="https://commons.wikimedia.org/wiki/File:Wikimedia_monthly_pageviews_(desktop%2Bmobile),_2013-.png#/media/File:Wikimedia_monthly_pageviews_(desktop%2Bmobile),_2013-.png" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">mobile usage is growing</a>. We are interested in adopting technologies such as <a href="https://developers.google.com/web/fundamentals/primers/service-workers/" data-href="https://developers.google.com/web/fundamentals/primers/service-workers/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">service workers</a> which provide offline support and better availability, but enabling one in a codebase such as ours is risky business.</p><h1 name="c725" id="c725" class="graf graf--h3 graf-after--p">The solution</h1><p name="0a5b" id="0a5b" class="graf graf--p graf-after--h3">After discussion within our engineering team, we focused on a solution to, and have provided proof of concepts for, iteratively refactoring and revising the existing code. <a href="https://www.mediawiki.org/wiki/Reading/Web/Projects/Invest_in_the_MobileFrontend_%26_MinervaNeue_frontend_architecture" data-href="https://www.mediawiki.org/wiki/Reading/Web/Projects/Invest_in_the_MobileFrontend_%26_MinervaNeue_frontend_architecture" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Our project proposal</a>, which <a href="https://www.mediawiki.org/wiki/Reading/Web/Projects/Invest_in_the_MobileFrontend_%26_MinervaNeue_frontend_architecture" data-href="https://www.mediawiki.org/wiki/Reading/Web/Projects/Invest_in_the_MobileFrontend_%26_MinervaNeue_frontend_architecture" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">is public</a>, explains why we feel strongly that we invest in mobile’s frontend architecture.</p><p name="1878" id="1878" class="graf graf--p graf-after--p">We drew our proposal from experience in a recent experiment with our <a href="https://blog.wikimedia.org/2018/04/20/why-it-took-a-long-time-to-build-that-tiny-link-preview-on-wikipedia/" data-href="https://blog.wikimedia.org/2018/04/20/why-it-took-a-long-time-to-build-that-tiny-link-preview-on-wikipedia/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">page previews feature</a> and a <a href="https://phabricator.wikimedia.org/phame/post/view/97/page_previews_front-end_tooling_conclusions/" data-href="https://phabricator.wikimedia.org/phame/post/view/97/page_previews_front-end_tooling_conclusions/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">write up of the experience</a>. Before the project, our front-end assets were managed with a MediaWiki-specific system <a href="https://medium.com/p/fdb108913068" data-href="https://medium.com/p/fdb108913068" class="markup--anchor markup--p-anchor" target="_blank">called ResourceLoader</a> and our proposal was to move off it and lean more on modern-widely utilized front-end tooling, for example — but not necessarily — <a href="https://webpack.js.org/" data-href="https://webpack.js.org/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Webpack</a>. With this achieved we would refactor, improve and modernize our neglected component library.</p><p name="5c45" id="5c45" class="graf graf--p graf-after--p">Inside the project proposal, we importantly made no specific promises; instead, we presented tangible <strong class="markup--strong markup--p-strong">problems</strong> and <strong class="markup--strong markup--p-strong">measurable outcomes</strong>, which after six months we have now partially achieved. Those include:</p><ul class="postList"><li name="a56d" id="a56d" class="graf graf--li graf-after--p">Increased test coverage (our code coverage was less than 50% and more alarmingly, 45 of our 81 files had 0% coverage.)</li><li name="98d3" id="98d3" class="graf graf--li graf-after--li">Fewer regressions (we’ve noticed every JavaScript regression and the majority have not been related to our refactor project)</li><li name="e07f" id="e07f" class="graf graf--li graf-after--li">Code built with modern tooling (all our JavaScript code is now built via Webpack which has made it much easier to work with)</li><li name="9e84" id="9e84" class="graf graf--li graf-after--li">Possible performance improvements (so far we’ve not seen any change here but we see the potential for change)</li><li name="9d80" id="9d80" class="graf graf--li graf-after--li">More reusable standardized components (we’ve started making headway on this!)</li></ul><p name="f2f4" id="f2f4" class="graf graf--p graf-after--li">And less measurable (but hopefully outcomes that could later be recognized):</p><ul class="postList"><li name="dcaf" id="dcaf" class="graf graf--li graf-after--p">Quicker on-boarding of new hires</li><li name="6aa4" id="6aa4" class="graf graf--li graf-after--li">Quicker development cycles and estimations for product work</li><li name="a190" id="a190" class="graf graf--li graf-after--li">More future proof code</li></ul><p name="5f9f" id="5f9f" class="graf graf--p graf-after--li">Essentially, for a project with limited time and resources (Wikipedia’s mobile site is maintained by a team of just 6 paid people), we pitched a <em class="markup--em markup--p-em">refactor </em>not a <em class="markup--em markup--p-em">rewrite</em>. Rather than replacing a complicated system, we would slowly and iteratively improve it. This was important as it promised iterative development while keeping the site up and running (and improving at all times). While this slowed down development it kept our work visible and kept us accountable to our product team, meaning it was impossible for our development team to hold our product owners hostage by telling them we couldn’t build new things until the refactor had completed. It also allowed us to work on new products in parallel to this important work (<a href="https://www.mediawiki.org/wiki/Reading/Web/Release_timeline#2019" data-href="https://www.mediawiki.org/wiki/Reading/Web/Release_timeline#2019" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">we shipped several projects during this time</a>) as well as guaranteeing that we would achieve something!</p><p name="7c5f" id="7c5f" class="graf graf--p graf-after--p">If you are interested, there is a technical write up of what we have done and what we have achieved so far on our internal blog: <a href="https://phabricator.wikimedia.org/phame/post/view/146/migrating_code_from_resourceloader_to_webpack/" data-href="https://phabricator.wikimedia.org/phame/post/view/146/migrating_code_from_resourceloader_to_webpack/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Migrating code from ResourceLoader to Webpack</a>.</p><h1 name="d7d4" id="d7d4" class="graf graf--h3 graf-after--p">Lessons learned</h1><p name="ff43" id="ff43" class="graf graf--p graf-after--h3">Halfway through this project, my team has made great headway, and I feel I am at a good point to reflect on what’s worked well for us.</p><h2 name="a217" id="a217" class="graf graf--h4 graf-after--p">1. Stop coding every now and again</h4><p name="8c03" id="8c03" class="graf graf--p graf-after--h4">If your engineering team is going from sprint to sprint without stopping, this is likely a problem. Our team found respite from coding during <a href="https://www.entrepreneur.com/article/230573" data-href="https://www.entrepreneur.com/article/230573" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">our company all-hands</a> and used this valuable time to talk strategically and write up the project proposal over the course of three days. This activity wasn’t all talking and writing— we built an important proof of concept!</p><p name="a891" id="a891" class="graf graf--p graf-after--p">Make sure your team is making time where everyone can stop coding so that the team is free to think and describe problems they are facing. Stop coding and talk to your team and find out what drives them mad and make sure you collect around a single problem statement.</p><p name="745a" id="745a" class="graf graf--p graf-after--p">In my opinion, a team offsite, in a foreign city, in the best environment for this to happen.</p><h2 name="9a17" id="9a17" class="graf graf--h4 graf-after--p">2. Be problem focused not solution-driven</h4><p name="165a" id="165a" class="graf graf--p graf-after--h4">It really helped my team to keep the project problem-focused rather than solution-driven. While many of us were tempted to be more ambitious and say we wanted to use <a href="https://reactjs.org/" data-href="https://reactjs.org/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">React.js</a> or <a href="https://en.wikipedia.org/wiki/TypeScript" data-href="https://en.wikipedia.org/wiki/TypeScript" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">TypeScript</a>, being problem-focused allowed us the flexibility to do whatever we felt was important for the project at any given time to be seen as a success.</p><p name="d118" id="d118" class="graf graf--p graf-after--p">One unexpected output of our work, which <a href="https://medium.com/freely-sharing-the-sum-of-all-knowledge/were-going-on-a-bug-hunt-we-re-not-scared-b4057e4a91d2" data-href="https://medium.com/freely-sharing-the-sum-of-all-knowledge/were-going-on-a-bug-hunt-we-re-not-scared-b4057e4a91d2" class="markup--anchor markup--p-anchor" target="_blank">I wrote about recently</a>, was exposing JavaScript errors. Before we began, the rewrite had us a little nervous and our infrastructure is <a href="https://medium.com/freely-sharing-the-sum-of-all-knowledge/were-going-on-a-bug-hunt-we-re-not-scared-b4057e4a91d2" data-href="https://medium.com/freely-sharing-the-sum-of-all-knowledge/were-going-on-a-bug-hunt-we-re-not-scared-b4057e4a91d2" class="markup--anchor markup--p-anchor" target="_blank">lacking a system for capturing JavaScript errors</a>. Thanks to being a problem-focused project, we had the flexibility to incorporate this into the pproject. After some discussion, we decided to build the smallest possible thing we could using existing infrastructure — <a href="https://medium.com/freely-sharing-the-sum-of-all-knowledge/were-going-on-a-bug-hunt-we-re-not-scared-b4057e4a91d2" data-href="https://medium.com/freely-sharing-the-sum-of-all-knowledge/were-going-on-a-bug-hunt-we-re-not-scared-b4057e4a91d2" class="markup--anchor markup--p-anchor" target="_blank">a client-side error counter</a>. While not ideal and not allowing us to understand what the errors were, this allowed us to get a sense of whether changes to the site are introducing bugs to users and provides us with a <a href="https://grafana.wikimedia.org/d/000000566/overview?panelId=15&amp;fullscreen&amp;orgId=1" data-href="https://grafana.wikimedia.org/d/000000566/overview?panelId=15&amp;fullscreen&amp;orgId=1" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">lovely graph</a> to monitor with motivating numbers. It also gave us data for a future technical project to pitch to our product team (I can’t wait for our next offsite)!</p><p name="c326" id="c326" class="graf graf--p graf-after--p">In addition to this, while we’ve been forced to look at the code, we’ve been noticing ways to improve it and prepare it for a modern future. For instance, we’ve been reducing our reliance on jQuery. While we’re not removing jQuery from our stack just yet, we’ve <a href="https://phabricator.wikimedia.org/T200868" data-href="https://phabricator.wikimedia.org/T200868" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">found inspiration</a> in other efforts to do this such as <a href="https://githubengineering.com/removing-jquery-from-github-frontend/" data-href="https://githubengineering.com/removing-jquery-from-github-frontend/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Github</a> to at least make this a real possibility.</p><h2 name="5704" id="5704" class="graf graf--h4 graf-after--p">3. Consider refactoring rather than rewriting</h4><p name="e54d" id="e54d" class="graf graf--p graf-after--h4">Many rewrites have been proposed and attempted at Wikimedia, in particular for the mobile site — proof of concepts exist in the form of a React mobile-clone <a href="https://trending.wmflabs.org" data-href="https://trending.wmflabs.org" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Weekipedia</a> and <a href="https://www.mediawiki.org/wiki/Reading/Web/Projects/NewMobileWebsite" data-href="https://www.mediawiki.org/wiki/Reading/Web/Projects/NewMobileWebsite" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">project Marvin</a> but the results of these have never materialized in production.</p><p name="797f" id="797f" class="graf graf--p graf-after--p">A legacy system is a well battle-tested system. While sometimes a rewrite is necessary, (bridges are a good example!), refactoring is a great way to ensure that something good comes of the work you do and that product sees the value of what you are working on.</p><p name="2ec0" id="2ec0" class="graf graf--p graf-after--p">We’ve been working on a refactor in a living, breathing codebase, for six months now, and that project is still running and hopefully, you have noticed no difference. If I don’t say so myself, I think that’s a pretty remarkable achievement of my team.</p><figure name="7319" id="7319" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 571px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 81.5%;"></div><img class="graf-image" data-image-id="0*jc92LuKKuGsLmTWd.jpg" data-width="768" data-height="626" src="https://cdn-images-1.medium.com/max/800/0*jc92LuKKuGsLmTWd.jpg"></div><figcaption class="imageCaption">Refactors may not necessarily be a good idea if you are building a replacement bridge, e.g. this one in Oakland, but they are always worth considering if you are not sure if you will completely finish. (Source: <a href="https://commons.wikimedia.org/wiki/File:San_Francisco-Oakland_Bay_Bridge,_helicopter_view_2.jpg" data-href="https://commons.wikimedia.org/wiki/File:San_Francisco-Oakland_Bay_Bridge,_helicopter_view_2.jpg" class="markup--anchor markup--figure-anchor" rel="noopener" target="_blank">Wikimedia Commons</a>, <a href="https://en.wikipedia.org/wiki/en:Creative_Commons" data-href="https://en.wikipedia.org/wiki/en:Creative_Commons" class="markup--anchor markup--figure-anchor" title="w:en:Creative Commons" rel="noopener" target="_blank">Creative Commons</a> <a href="https://creativecommons.org/licenses/by/2.0/deed.en" data-href="https://creativecommons.org/licenses/by/2.0/deed.en" class="markup--anchor markup--figure-anchor" rel="nofollow noopener noopener" target="_blank">Attribution 2.0 Generic</a> license.)</figcaption></figure><h2 name="36a4" id="36a4" class="graf graf--h4 graf-after--figure">4. Make talking a routine</h4><p name="4dcf" id="4dcf" class="graf graf--p graf-after--h4">The most important output for me was the conversations my development team had. Having a big technical project and the time and freedom to oversee it empowered the team to justify a dedicated hour every week to talk about the problem statement.</p><p name="7077" id="7077" class="graf graf--p graf-after--p">This project, while not giving us shiny technologies, has allowed us to have many conversations about many of the patterns popular libraries encourage such as <a href="https://en.wikipedia.org/wiki/Composition_over_inheritance" data-href="https://en.wikipedia.org/wiki/Composition_over_inheritance" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">composition over inheritance</a>, <a href="https://reactjs.org/docs/higher-order-components.html" data-href="https://reactjs.org/docs/higher-order-components.html" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Higher Order Components</a> and <a href="https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0" data-href="https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0" class="markup--anchor markup--p-anchor" target="_blank">dumb components</a> to name a few. It allowed us to understand the history of the project; why things are the way they are; talk about what we like in other codebases and what we’d love to learn. It was essentially a focused <em class="markup--em markup--p-em">brown-bag session</em> that gave us all ideas of where we were heading and if we wanted to achieve things how we might get there.</p><p name="4358" id="4358" class="graf graf--p graf-after--p">If you work in a technical team and you are spending most of your time coding in some form, I highly encourage you to find at least one hour a week to talk about the higher-level goals of your work as a team. What one person is struggling with or excited about is likely a larger topic in need of a discussion.</p><figure name="22a8" id="22a8" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 535px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 76.4%;"></div><img class="graf-image" data-image-id="0*ZSPPxZrSYrHL6N-L.jpg" data-width="1024" data-height="782" src="https://cdn-images-1.medium.com/max/800/0*ZSPPxZrSYrHL6N-L.jpg"></div><figcaption class="imageCaption">A software engineer show and tells the latest JavaScript framework to their colleagues with the claim it will solve ALL the problems© during their weekly developer focused meeting (Source: <a href="https://en.wikipedia.org/wiki/File:Traction_Engine_Mechanics.jpg" data-href="https://en.wikipedia.org/wiki/File:Traction_Engine_Mechanics.jpg" class="markup--anchor markup--figure-anchor" rel="noopener" target="_blank">Wikimedia Commons</a>, <a href="https://en.wikipedia.org/wiki/Creative_Commons" data-href="https://en.wikipedia.org/wiki/Creative_Commons" class="markup--anchor markup--figure-anchor" rel="noopener" target="_blank"><em class="markup--em markup--figure-em">Creative Commons</em></a><em class="markup--em markup--figure-em"> </em><a href="https://creativecommons.org/licenses/by-sa/3.0/" data-href="https://creativecommons.org/licenses/by-sa/3.0/" class="markup--anchor markup--figure-anchor" rel="nofollow noopener" target="_blank"><em class="markup--em markup--figure-em">Attribution-ShareAlike 3.0</em></a><em class="markup--em markup--figure-em"> License.)</em></figcaption></figure><h1 name="86de" id="86de" class="graf graf--h3 graf-after--figure">Technical debt is a real problem — recognize it!</h1><p name="7ce1" id="7ce1" class="graf graf--p graf-after--h3">Much of Wikipedia’s code is not the most appealing of technology stacks for front-end developers. We don’t use any well-known frameworks. My experience has shown that new hires can take many months to become fully effective, and existing hires are susceptible to getting frustrated with it.</p><p name="229c" id="229c" class="graf graf--p graf-after--p">That said, I believe strongly that in a decade from now, much of software engineering is going to be about fixing codebases that were built in this era by teams understandably building irresponsibly in order to hit deadlines or create that first minimal viable product, so I think getting exposure to mature codebases and finding ways to refactor them responsibly is an enlightening and rewarding experience.</p><p name="b373" id="b373" class="graf graf--p graf-after--p">While hard, it’s our duty as engineers and product owners to explain and understand why cutting a corner is a bad idea and technical debt is a problem.</p><p name="9bd2" id="9bd2" class="graf graf--p graf-after--p">We should all talk more — to our existing team members and future team members. Good engineers should be explaining the problems they are solving before building (it might have already been solved!) and take time to document complicated or hacky code in great detail! We shouldn’t be afraid to write long and lengthy commit messages about what we are doing, no matter how obvious it might seem at the time.</p><p name="2782" id="2782" class="graf graf--p graf-after--p">We should all strive to ask each other for help and opinions in code reviews and outside code reviews. We should communicate about what we don’t like and what we do like. We should listen to the frustrated junior developers in the team and the conservative senior engineers that have seen it all before and find problems and solutions.</p><p name="b940" id="b940" class="graf graf--p graf-after--p">Someone is going to have to live in our code and suffer our exact same problems when we are long gone and ultimately it&#39;s the user who suffers from that. Let&#39;s remember that next time we decide to speed up a software delivery.</p><figure name="39af" id="39af" class="graf graf--figure graf-after--p graf--trailing"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 465px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 66.5%;"></div><img class="graf-image" data-image-id="0*YH5wa5SkNvnQmf4h.JPG" data-width="1088" data-height="723" src="https://cdn-images-1.medium.com/max/800/0*YH5wa5SkNvnQmf4h.JPG"></div><figcaption class="imageCaption">A new hire at a recent IPO inspects the codebase he’s inherited (Source: <a href="https://www.af.mil/News/Photos/igphoto/2000543681/" data-href="https://www.af.mil/News/Photos/igphoto/2000543681/" class="markup--anchor markup--figure-anchor" rel="noopener" target="_blank">US Airforce</a>, public domain)</figcaption></figure></div></div></section><section name="799b" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h2 name="d466" id="d466" class="graf graf--h4 graf--leading">Footnotes</h4><p name="f476" id="f476" class="graf graf--p graf-after--h4">If you want to work with a codebase different from what you may be used to consider <a href="https://gerrit.wikimedia.org/r/admin/projects/mediawiki/extensions/MobileFrontend" data-href="https://gerrit.wikimedia.org/r/admin/projects/mediawiki/extensions/MobileFrontend" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">cloning our codebase</a> and <a href="https://gist.github.com/jdlrobson/e516699c2b78009139e5c69a5cac518c" data-href="https://gist.github.com/jdlrobson/e516699c2b78009139e5c69a5cac518c" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">submitting a patch or two</a>.</p><p name="d603" id="d603" class="graf graf--p graf-after--p">If you want to learn more about what we did with Webpack and what we were doing for, please read my other article <a href="https://phabricator.wikimedia.org/phame/post/view/146/migrating_code_from_resourceloader_to_webpack/" data-href="https://phabricator.wikimedia.org/phame/post/view/146/migrating_code_from_resourceloader_to_webpack/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Migrating code from ResourceLoader to Webpack</a></p><p name="5b3b" id="5b3b" class="graf graf--p graf-after--p graf--trailing">¹ [For the record, adoption of new libraries is not impossible (in fact a <a href="https://github.com/wmde/php-vuejs-templating" data-href="https://github.com/wmde/php-vuejs-templating" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">PHP Vue templating library has just been created</a> with plans for adoption in <a href="https://wikidata.org" data-href="https://wikidata.org" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Wikidata.org</a>)!]</p></div></div></section>
</section>
<p>This was also posted on <a href="https://medium.com/freely-sharing-the-sum-of-all-knowledge/how-we-tackled-technical-debt-at-wikipedia-d52030065e2c ">medium.com</a></p>
<footer><p>By <a href="https://medium.com/@dlyall" class="p-author h-card">Jon Robson (David Lyall)</a> on <a href="https://medium.com/p/d52030065e2c"><time class="dt-published" datetime="2019-03-13T11:56:01.104Z">March 13, 2019</time></a>.</p><p><a href="https://medium.com/@dlyall/how-we-tackled-technical-debt-at-wikipedia-d52030065e2c" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on January 14, 2020.</p></footer></article></body></html>